# АСПЗ

## Практична робота №3, Варіант 7

Був використаний запуск скриптів Bash для задання лімітів тільки на запуск програми, а також для швидкого тестування програми.

---

### 3.1 — Задання ліміт кількості файлів

#### Умова

Запустіть Docker-контейнер і поекспериментуйте з максимальним лімітом ресурсів відкритих файлів. Для цього виконайте команди у вказаному порядку. Потворіть з root-правами.

#### Скріншоти

![without_root](https://github.com/KostyaKindaluk/practice-3/blob/master/task1/screenshot1.png)

![with_root](https://github.com/KostyaKindaluk/practice-3/blob/master/task1/screenshot2.png)

---

### 3.3 — Задання ліміту на розмір файлу та імітація кидання кубика

#### Умова

Напишіть програму, що імітує кидання шестигранного кубика. Імітуйте кидки, результати записуйте у файл, для якого попередньо встановлено обмеження на його максимальний розмір (max file size). Коректно обробіть ситуацію перевищення ліміту.

#### Опис виконання

Було створено програму на C, яка у нескінченному циклі імітує кидання шестигранного кубика. Результати записуються у файл dice_rolls.txt. Для обмеження розміру цього файлу було встановлено ліміт за допомогою ulimit -f. Коли файл досягає встановленого ліміту, fwrite повертає помилку, яку програма обробляє, виводячи повідомлення про перевищення ліміту.

#### Скріншоти

![screenshot](https://github.com/KostyaKindaluk/practice-3/blob/master/task3/screenshot.png)

---

### 3.4 — Задання ліміту на час CPU та імітація лотереї

#### Умова

Напишіть програму, що імітує лотерею, вибираючи 7 різних цілих чисел у діапазоні від 1 до 49 і ще 6 з 36. Встановіть обмеження на час Цп (max CPU time) і генеруйте результати вибору чисел (7 із 49, 6 із 36). Обробіть ситуацію, коли ліміт ресурсу вичерпано.

#### Опис виконання

Було реалізовано програму, яка генерує випадкові числа для лотереї: 7 чисел з 49 та 6 з 36. Усі результати записуються у файл. Щоб обмежити час виконання, було встановлено ліміт на CPU через ulimit -t. Також було додано обробник сигналу SIGXCPU, який зупиняє виконання програми при досягненні ліміту. Це дозволяє завершити програму контрольовано і вивести повідомлення про перевищення ліміту часу.

#### Скріншоти

![screenshot](https://github.com/KostyaKindaluk/practice-3/blob/master/task4/screenshot.png)

---

### 3.5 — Копіювання змісту файлу з врахуванням ліміту на розмір файлу

#### Умова

Напишіть програму для копіювання одного іменованого файлу в інший. Імена файлів передаються у вигляді аргументів.
Програма має:
- перевіряти, чи передано два аргументи, інакше виводити "Program need two arguments";
- перевіряти доступність першого файлу для читання, інакше виводити "Cannot open file .... for reading";
- перевіряти доступність другого файлу для запису, інакше виводити "Cannot open file .... for writing";
- обробляти ситуацію перевищення обмеження на розмір файлу.

#### Опис виконання

Створена програма перевіряє аргументи командного рядка та відкриває файли для читання і запису. У циклі дані читаються з вхідного файлу та записуються у вихідний. При перевищенні обмеження на розмір файлу (ulimit -f) програма виводить повідомлення про помилку запису. Також протестовані випадки з неправильними аргументами та неіснуючими файлами.

#### Скріншоти

![screenshot](https://github.com/KostyaKindaluk/practice-3/blob/master/task5/screenshot.png)

---

### 3.6 — Демонстрація ліміту розміру стека

#### Умова

Напишіть програму, що демонструє використання обмеження (max stack segment size). Підказка: рекурсивна програма активно використовує стек.

#### Опис виконання

Було реалізовано рекурсивну функцію, яка кожен раз виділяє велику локальну змінну, щоб швидше заповнити стек. Для демонстрації обмеження було встановлено ліміт ulimit -s. Після досягнення ліміту програма аварійно завершується. Виводиться глибина рекурсії, на якій це відбулось, що дозволяє оцінити вплив розміру стека.

#### Скріншоти

![screenshot](https://github.com/KostyaKindaluk/practice-3/blob/master/task6/screenshot.png)

---

### Варіант 7 — Демонстрація ліміту пам'яті програми

#### Умова

Використати ulimit -v для обмеження використання резидентної пам’яті.

#### Опис виконання

Програма у циклі виділяє великі блоки пам’яті розміром 4 МБ і заповнює їх нулями. Кожен успішний виділений блок враховується в загальній статистиці. Як тільки програма досягає встановленого ліміту, malloc повертає NULL, і програма виводить повідомлення про помилку виділення пам’яті. Після цього виконання припиняється.

#### Скріншоти

![screenshot](https://github.com/KostyaKindaluk/practice-3/blob/master/variant7/screenshot.png)